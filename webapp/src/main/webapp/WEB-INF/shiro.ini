# 
#  Copyright 2012-2013 Eurocommercial Properties NV
#
#  Licensed under the Apache License, Version 2.0 (the "License"); 
#  you may not use this file except in compliance with the License. 
#  You may obtain a copy of the License at 
#
#     http://www.apache.org/licenses/LICENSE-2.0
#     
#  Unless required by applicable law or agreed to in writing, 
#  software distributed under the License is distributed on an 
#  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, 
#  either express or implied. See the License for the specific
#  language governing permissions and limitations under the License.
#

[main]
builtInCacheManager = org.apache.shiro.cache.MemoryConstrainedCacheManager
securityManager.cacheManager = $builtInCacheManager


######
# set up an IniRealm that defines local (non-LDAP) users (in the [users] block)
# and also maps roles to perms (in the [roles] block)
# ... shared with ldapRealm above
#
# the .ini file lives in src/main/resources
######
localRealm = org.apache.shiro.realm.text.IniRealm
localRealm.resourcePath=\
    classpath:org/estatio/webapp/webinf/local_users_and_shared_role_perms.ini


######
# set up our custom LDAP realm LDAP users and their roles
# and also maps roles to perms (in the [roles] block)
# ... shared with iniRealm above
######

ldapRealm = org.estatio.webapp.shiro.EstatioLdapRealm

contextFactory = org.estatio.webapp.shiro.EstatioLdapContextFactory
contextFactory.url = ldap://<server>:389
contextFactory.authenticationMechanism = simple
 
contextFactory.systemUsername = <user>@<domain>
contextFactory.systemPassword = <password>

ldapRealm.contextFactory = $contextFactory

# (&(objectCategory=Person)(sAMAccountName=Sven))
ldapRealm.searchBase = DC=ECP,DC=LOC

# search using eg: (&(objectClass=group)(cn=<LDAPGroupName>))
ldapRealm.roleListByGroup = \
  Estatio-Users : user_role,\
  Estatio-Administrators: user_role|admin_role

# the user_role and admin_role are mapped to their permissions through the ini file: 
ldapRealm.resourcePath=\
    classpath:org/estatio/webapp/webinf/local_users_and_shared_role_perms.ini


######
# specify which realm(s) to use
######
securityManager.realms = $localRealm
#securityManager.realms = $ldapRealm
#securityManager.realms = $localRealm,$ldapRealm


[users]

# not used, since configured to use $localRealm rather than the built-in $iniRealm (see above)


[roles]

# not used, since configured to use $localRealm rather than the built-in $iniRealm (see above)
